<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>em-odp: Event timer add-on</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doc-stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">em-odp
   &#160;<span id="projectnumber">2.2.0</span>
   </div>
   <div id="projectbrief">Event Machine on ODP</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/dc2/group__em__timer.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Event timer add-on</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gafaa548136392ce1e5ffcc5cb4307e782"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafaa548136392ce1e5ffcc5cb4307e782"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EM_TIMER_API_VERSION_MAJOR</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:gafaa548136392ce1e5ffcc5cb4307e782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac01727f254803f67555df37a351be733"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac01727f254803f67555df37a351be733"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EM_TIMER_API_VERSION_MINOR</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gac01727f254803f67555df37a351be733"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga22751bec511b1db5d5fc77a231ffab2e"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga22751bec511b1db5d5fc77a231ffab2e">em_tmo_state_t</a></td></tr>
<tr class="separator:ga22751bec511b1db5d5fc77a231ffab2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe7128676f8f4ad4800fd204a34ac8d3"><td class="memItemLeft" align="right" valign="top">typedef uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a></td></tr>
<tr class="separator:gafe7128676f8f4ad4800fd204a34ac8d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb6bb7d1318a089968d3df50ee3331d5"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#gadb6bb7d1318a089968d3df50ee3331d5">em_timer_attr_t</a></td></tr>
<tr class="separator:gadb6bb7d1318a089968d3df50ee3331d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d03edec0f070b22d68088c31483a125"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../dd/d32/structem__timer__timeout__t.html">em_timer_timeout_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a></td></tr>
<tr class="separator:ga4d03edec0f070b22d68088c31483a125"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga3857ab06946e6b4047352d5d84ffff4d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a> { <b>EM_TMO_STATE_UNKNOWN</b> = 0, 
<a class="el" href="../../de/dc2/group__em__timer.html#gga3857ab06946e6b4047352d5d84ffff4da71ad2867a19be302ff468db710317f58">EM_TMO_STATE_IDLE</a> = 1, 
<a class="el" href="../../de/dc2/group__em__timer.html#gga3857ab06946e6b4047352d5d84ffff4daa54abf62265d1c2beaeeadb6a1ee240f">EM_TMO_STATE_ACTIVE</a> = 2, 
<a class="el" href="../../de/dc2/group__em__timer.html#gga3857ab06946e6b4047352d5d84ffff4da49eaac5bf1e148e549517bc92823043c">EM_TMO_STATE_INACTIVE</a> = 3
 }</td></tr>
<tr class="separator:ga3857ab06946e6b4047352d5d84ffff4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga860d15ba27f7a6270e4914f6590999a9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga860d15ba27f7a6270e4914f6590999a9">em_timer_flag_t</a> { <a class="el" href="../../de/dc2/group__em__timer.html#ga860d15ba27f7a6270e4914f6590999a9a99a2164f7e1f46333e8babce1b56128c">EM_TIMER_FLAG_DEFAULT</a> = 0, 
<a class="el" href="../../de/dc2/group__em__timer.html#ga860d15ba27f7a6270e4914f6590999a9a00b65ab35bc8e216384fe1130efa65f6">EM_TIMER_FLAG_PRIVATE</a> = 1
 }</td></tr>
<tr class="separator:ga860d15ba27f7a6270e4914f6590999a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaade0f99e694a2f999abe467bc05fde61"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#gaade0f99e694a2f999abe467bc05fde61">em_tmo_flag_t</a> { <a class="el" href="../../de/dc2/group__em__timer.html#gaade0f99e694a2f999abe467bc05fde61a8e5343b756922a7d6527d8ddff10ff14">EM_TMO_FLAG_ONESHOT</a> = 1, 
<a class="el" href="../../de/dc2/group__em__timer.html#gaade0f99e694a2f999abe467bc05fde61aac8e81389e6feaf233eff357c4ece5f0">EM_TMO_FLAG_PERIODIC</a> = 2, 
<a class="el" href="../../de/dc2/group__em__timer.html#gaade0f99e694a2f999abe467bc05fde61a6eb7050f533988c44b9b9ee783903c44">EM_TMO_FLAG_NOSKIP</a> = 4, 
<a class="el" href="../../de/dc2/group__em__timer.html#gaade0f99e694a2f999abe467bc05fde61aa047bb5cccbf6a44f023104f4a116851">EM_TMO_FLAG_DEFAULT</a> = EM_TMO_FLAG_ONESHOT
 }</td></tr>
<tr class="separator:gaade0f99e694a2f999abe467bc05fde61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c3e2d62c82f0a1b165171f8fff1ef81"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga6c3e2d62c82f0a1b165171f8fff1ef81">em_timer_clksrc_t</a> { <a class="el" href="../../de/dc2/group__em__timer.html#ga6c3e2d62c82f0a1b165171f8fff1ef81a9a19609f7c0d11f1b6d89bd42e216e7e">EM_TIMER_CLKSRC_DEFAULT</a> = 0, 
<a class="el" href="../../de/dc2/group__em__timer.html#ga6c3e2d62c82f0a1b165171f8fff1ef81aa5928a527fda81e62700e9031092fdde">EM_TIMER_CLKSRC_CPU</a> = 1, 
<a class="el" href="../../de/dc2/group__em__timer.html#ga6c3e2d62c82f0a1b165171f8fff1ef81a13225f3238b99f54d800a1ab2a97d585">EM_TIMER_CLKSRC_EXT</a> = 2
 }</td></tr>
<tr class="separator:ga6c3e2d62c82f0a1b165171f8fff1ef81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga56968bda0ecacf996d6ce623e3e372ab"><td class="memItemLeft" align="right" valign="top">em_timer_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga56968bda0ecacf996d6ce623e3e372ab">em_timer_create</a> (const <a class="el" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a> *tmr_attr)</td></tr>
<tr class="separator:ga56968bda0ecacf996d6ce623e3e372ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bac1530b021bbbd1f0f924414c2485e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga2bac1530b021bbbd1f0f924414c2485e">em_timer_delete</a> (em_timer_t tmr)</td></tr>
<tr class="separator:ga2bac1530b021bbbd1f0f924414c2485e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabb77ed31727a32d041f9d308a0a3886"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#gaabb77ed31727a32d041f9d308a0a3886">em_timer_current_tick</a> (em_timer_t tmr)</td></tr>
<tr class="separator:gaabb77ed31727a32d041f9d308a0a3886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fc3dd338b784ce9b122eeb3fbf4ea07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga4fc3dd338b784ce9b122eeb3fbf4ea07">em_tmo_create</a> (em_timer_t tmr, <a class="el" href="../../de/dc2/group__em__timer.html#gaade0f99e694a2f999abe467bc05fde61">em_tmo_flag_t</a> flags, em_queue_t queue)</td></tr>
<tr class="separator:ga4fc3dd338b784ce9b122eeb3fbf4ea07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02299198fbbddd489006485544892da8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga02299198fbbddd489006485544892da8">em_tmo_delete</a> (<a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a> tmo, em_event_t *cur_event)</td></tr>
<tr class="separator:ga02299198fbbddd489006485544892da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0270ed11757a26046af070264404ecbf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga0270ed11757a26046af070264404ecbf">em_tmo_set_abs</a> (<a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a> tmo, <a class="el" href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a> ticks_abs, em_event_t tmo_ev)</td></tr>
<tr class="separator:ga0270ed11757a26046af070264404ecbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe6b4e51cd71d86d0e60534ba00cbac2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#gabe6b4e51cd71d86d0e60534ba00cbac2">em_tmo_set_rel</a> (<a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a> tmo, <a class="el" href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a> ticks_rel, em_event_t tmo_ev)</td></tr>
<tr class="separator:gabe6b4e51cd71d86d0e60534ba00cbac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga786f0cc89e9bdfda1c1274165600f0ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga786f0cc89e9bdfda1c1274165600f0ef">em_tmo_cancel</a> (<a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a> tmo, em_event_t *cur_event)</td></tr>
<tr class="separator:ga786f0cc89e9bdfda1c1274165600f0ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf65f50c383b579720a31154b04ea610e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#gaf65f50c383b579720a31154b04ea610e">em_tmo_ack</a> (<a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a> tmo, em_event_t next_tmo_ev)</td></tr>
<tr class="separator:gaf65f50c383b579720a31154b04ea610e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25b88dbbb772090d6caa5622c7017889"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga25b88dbbb772090d6caa5622c7017889">em_timer_get_all</a> (em_timer_t *tmr_list, int max)</td></tr>
<tr class="separator:ga25b88dbbb772090d6caa5622c7017889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01e680281f0ae40bce6c6786fc0bcdc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga01e680281f0ae40bce6c6786fc0bcdc3">em_timer_get_attr</a> (em_timer_t tmr, <a class="el" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a> *tmr_attr)</td></tr>
<tr class="separator:ga01e680281f0ae40bce6c6786fc0bcdc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae97b08e2b1468de76a7d92342a5860ed"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#gae97b08e2b1468de76a7d92342a5860ed">em_timer_get_freq</a> (em_timer_t tmr)</td></tr>
<tr class="separator:gae97b08e2b1468de76a7d92342a5860ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga66476f77546996eea9acebaa471c1b52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc2/group__em__timer.html#ga66476f77546996eea9acebaa471c1b52">em_tmo_get_state</a> (<a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a> tmo)</td></tr>
<tr class="separator:ga66476f77546996eea9acebaa471c1b52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Event Machine timer add-on</p>
<p>The timer API can be used to request an event to be sent to a specified queue at a specified time once (one-shot) or at regular intervals (periodic). A timer needs to be created first - it represents a collection of timeouts with certain attributes (e.g. timeout resolution and maximum period). A timer can be mapped to a HW resource on an SoC, thus the number of timers, capabilities and time bases are system specific. Typically only one or a few timers are supported. The application can specify required capabilities when a timer is created. The creation will fail if the implementation cannot fulfill the required values. Timers are typically created once at system startup.</p>
<p>A timer is a shared resource with proper synchronization for concurrent multi-thread use. It is possible to exclude all multi-thread protections if a timer is used exclusively by a single thread (for potential performance gains). This is done by setting EM_TIMER_FLAG_PRIVATE when creating a timer. Setting this flag means that the application must ensure that only a single thread is using the timer (this also includes the receiver of periodic timeouts due to the ack-functionality). This private-mode is not necessarily implemented on all systems, in which case the flag is ignored as it will not cause any functional difference.</p>
<p>Timeouts (tmo) can be created once a timer exists. Creating a timeout allocates the resources needed to serve the timeout, but does not arm it - this makes it possible to pre-create timeout(s) and set the expiry later at runtime. This can improve performance but also minimizes the possibility that the runtime call setting the expiry would fail, as resources have already been reserved beforehand.</p>
<p>A pending timeout can be cancelled. Note that there is no way to cancel an expired timeout for which the event has already been sent but not yet received by the application - canceling, in this case, will return an error to enable the the application to detect the situation. For a periodic timer, a cancel will stop further timeouts, but may not be able to prevent the latest event from being received.</p>
<p>An active timeout cannot be altered without canceling it first.</p>
<p>Timeouts needs to be deleted after use. Deletion frees the resources reserved during creation.</p>
<p>The unit of time (seconds, nanoseconds, cycles of 1.66GHz clock, frame numbers etc.) is defined per timer/clock source and is system dependent. The timeout value is an abstract "tick" defined per timer. A clock source can be specified when creating a timer. It defines the time base of the timer for systems with multiple sources implemented. EM_TIMER_CLKSRC_DEFAULT is a portable value that implements a basic monotonic non-wrapping time, typically based on the CPU clock. It is assumed that the tick count is monotonic and will not wrap around, unless a specific timer uses something exotic like a cyclic short frame number counter. The tick frequency of a timer can be inquired at runtime.</p>
<p>A periodic timer requires the application to acknowledge each received timeout event after it has been processed. The acknowledgment activates the next timeout and compensates for the processing delay to keep the original interval. This creates a flow control mechanism and also protects the event handling from races if the same event is reused every time - the next timeout will not be sent before the previous has been acknowledged. The event to be received for each periodic timeout can also be different, because the next event is always given by the application through the acknowledge operation. The target queue cannot be modified after the timeout has been created.</p>
<p>If the acknowledgment of a periodic timeout is done too late (after the next period has already passed), the default action is to skip the missed timeout slot(s) and arm for the next valid slot. If the application never wants to skip a missed timeout it can set the flag EM_TMO_FLAG_NOSKIP when creating a timeout, which causes each acknowledgment to schedule an immediate timeout event until all the missed time slots have been served. This keeps the number of timeouts as expected but may cause an event storm if a long processing delay has occurred.</p>
<p>The timeout handle is needed when acknowledging a periodic timeout event. Because any event can be used for the timeout, the application must itself provide a way to derive the timeout handle from the received timeout event (a typical way is to include the tmo handle within the timeout event). The application also needs to have a mechanism to detect which event is a periodic timeout to be able to acknowledge.</p>
<p>Example usage </p><div class="fragment"><div class="line"><span class="comment">// This would typically be done at application init.</span></div><div class="line"><span class="comment">// Accept all defaults but require at least 100us resolution</span></div><div class="line"><span class="comment">// and give a name.</span></div><div class="line"><a class="code" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a> attr;</div><div class="line">memset(&amp;attr, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a>));</div><div class="line">attr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a9ca7ac30339e4c240affa7f1d8a2744a">resolution</a> = 100000;</div><div class="line">strncpy(attr.<a class="code" href="../../d4/d00/structem__timer__attr__t.html#a03fc2b0569742931ed610f0bd1af43ad">name</a>, <span class="stringliteral">&quot;100usTimer&quot;</span>, EM_TIMER_NAME_LEN);</div><div class="line">em_timer_t tmr = <a class="code" href="../../de/dc2/group__em__timer.html#ga56968bda0ecacf996d6ce623e3e372ab">em_timer_create</a>(&amp;attr);</div><div class="line"><span class="keywordflow">if</span>(tmr == <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#aa373a94a9084c3bd6c5b23ac6bd6b176">EM_TIMER_UNDEF</a>) {</div><div class="line">   <span class="comment">// out of resources or too tight requirements</span></div><div class="line">   <span class="comment">// handle error here or via error handler</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// At runtime - create a timeout resource.</span></div><div class="line"><span class="comment">// Can be done in advance to save time if the target queue is known.</span></div><div class="line"><a class="code" href="../../dd/d32/structem__timer__timeout__t.html">em_tmo_t</a> tmo = <a class="code" href="../../de/dc2/group__em__timer.html#ga4fc3dd338b784ce9b122eeb3fbf4ea07">em_tmo_create</a>(tmr, EM_TIMER_FLAG_ONESHOT, target_queue);</div><div class="line"><span class="keywordflow">if</span>(tmo == <a class="code" href="../../d7/d1f/event__machine__timer__hw__specific_8h.html#af7917fb5bc546e1339ad6e1135fd8c6d">EM_TMO_UNDEF</a>) {</div><div class="line">   <span class="comment">// no such timer or out of resources</span></div><div class="line">   <span class="comment">// handle error here or via error handler</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Get the timer frequency</span></div><div class="line">uint64_t hz = <a class="code" href="../../de/dc2/group__em__timer.html#gae97b08e2b1468de76a7d92342a5860ed">em_timer_get_freq</a>(tmr);</div><div class="line"></div><div class="line"><span class="comment">// Activate a 10ms timeout from now.</span></div><div class="line"><span class="comment">// Very unlikely to fail with valid arguments.</span></div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="../../de/dc2/group__em__timer.html#gabe6b4e51cd71d86d0e60534ba00cbac2">em_tmo_set_rel</a>(tmo, hz / 100, my_tmo_event) != <a class="code" href="../../d4/d11/event__machine__types_8h.html#a03546e6a7e93665c52d479831e0a6dca">EM_OK</a>) {</div><div class="line">   <span class="comment">// handle error here or via error handler</span></div><div class="line">}</div></div><!-- fragment --><p>At the moment the timer is an 'add-on', i.e. not part of the base API exposed by <a class="el" href="../../d7/d5e/event__machine_8h.html">event_machine.h</a> </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gadb6bb7d1318a089968d3df50ee3331d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a>  <a class="el" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Include system specific configuration and types Structure used to create a timer (or inquire its capabilities).</p>
<p>Setting a field to 0 means that the application accepts the default value. Setting a non-zero value indicates a requirement. E.g. setting 'resolution' to 1000(ns) requires at least 1us resolution. The timer creation will fail if the implementation cannot support such high a resolution . The implementation is free to provide better than requested, but not worse. </p>

</div>
</div>
<a class="anchor" id="gafe7128676f8f4ad4800fd204a34ac8d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint64_t <a class="el" href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The timer tick has HW and timer specific meaning, but the type is always a 64-bit integer and is normally assumed to be monotonic and not to wrap around. Exceptions with exotic extra timers should be clearly documented. </p>

<p>Definition at line <a class="el" href="../../db/d46/event__machine__timer_8h_source.html#l00218">218</a> of file <a class="el" href="../../db/d46/event__machine__timer_8h_source.html">event_machine_timer.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga22751bec511b1db5d5fc77a231ffab2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a>  <a class="el" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Visible state of a timeout </p>

</div>
</div>
<a class="anchor" id="ga4d03edec0f070b22d68088c31483a125"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>em_tmo_t (timeout handle) needs to be defined by the EM implementation</p>
<p>System specific type for a timeout handle. </p>

<p>Definition at line <a class="el" href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00065">65</a> of file <a class="el" href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html">event_machine_timer_hw_specific.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga6c3e2d62c82f0a1b165171f8fff1ef81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/dc2/group__em__timer.html#ga6c3e2d62c82f0a1b165171f8fff1ef81">em_timer_clksrc_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>System specific enum type for timer clock source. This is system specific, but all implementations must define EM_TIMER_CLKSRC_DEFAULT. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ga6c3e2d62c82f0a1b165171f8fff1ef81a9a19609f7c0d11f1b6d89bd42e216e7e"></a>EM_TIMER_CLKSRC_DEFAULT&#160;</td><td class="fielddoc">
<p>Portable default clock source </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga6c3e2d62c82f0a1b165171f8fff1ef81aa5928a527fda81e62700e9031092fdde"></a>EM_TIMER_CLKSRC_CPU&#160;</td><td class="fielddoc">
<p>CPU clock as clock source </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga6c3e2d62c82f0a1b165171f8fff1ef81a13225f3238b99f54d800a1ab2a97d585"></a>EM_TIMER_CLKSRC_EXT&#160;</td><td class="fielddoc">
<p>External clock source </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00090">90</a> of file <a class="el" href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html">event_machine_timer_hw_specific.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga860d15ba27f7a6270e4914f6590999a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/dc2/group__em__timer.html#ga860d15ba27f7a6270e4914f6590999a9">em_timer_flag_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>System specific type for timer flags. This is system specific, but all implementations must define EM_TIMER_FLAG_DEFAULT and EM_TIMER_FLAG_PRIVATE, of which the latter is used to skip API synchronization for single threaded apps. Flags can be combined by bitwise OR. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ga860d15ba27f7a6270e4914f6590999a9a99a2164f7e1f46333e8babce1b56128c"></a>EM_TIMER_FLAG_DEFAULT&#160;</td><td class="fielddoc">
<p>alias for no flag/default </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga860d15ba27f7a6270e4914f6590999a9a00b65ab35bc8e216384fe1130efa65f6"></a>EM_TIMER_FLAG_PRIVATE&#160;</td><td class="fielddoc">
<p>single thread use, not multithread safe, but potentially faster </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00055">55</a> of file <a class="el" href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html">event_machine_timer_hw_specific.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaade0f99e694a2f999abe467bc05fde61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/dc2/group__em__timer.html#gaade0f99e694a2f999abe467bc05fde61">em_tmo_flag_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>System specific enum type for timeout flags. This is system specific, but all implementations must define EM_TMO_FLAG_ONESHOT, EM_TMO_FLAG_PERIODIC and EM_TMO_FLAG_NOSKIP. Flags can be combined by bitwise OR. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gaade0f99e694a2f999abe467bc05fde61a8e5343b756922a7d6527d8ddff10ff14"></a>EM_TMO_FLAG_ONESHOT&#160;</td><td class="fielddoc">
<p>to select one-shot </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gaade0f99e694a2f999abe467bc05fde61aac8e81389e6feaf233eff357c4ece5f0"></a>EM_TMO_FLAG_PERIODIC&#160;</td><td class="fielddoc">
<p>to select periodic </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gaade0f99e694a2f999abe467bc05fde61a6eb7050f533988c44b9b9ee783903c44"></a>EM_TMO_FLAG_NOSKIP&#160;</td><td class="fielddoc">
<p>see periodic ack </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gaade0f99e694a2f999abe467bc05fde61aa047bb5cccbf6a44f023104f4a116851"></a>EM_TMO_FLAG_DEFAULT&#160;</td><td class="fielddoc">
<p>for default one-shot </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html#l00075">75</a> of file <a class="el" href="../../d7/d1f/event__machine__timer__hw__specific_8h_source.html">event_machine_timer_hw_specific.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga3857ab06946e6b4047352d5d84ffff4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Visible state of a timeout </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga3857ab06946e6b4047352d5d84ffff4da71ad2867a19be302ff468db710317f58"></a>EM_TMO_STATE_IDLE&#160;</td><td class="fielddoc">
<p>just created or canceled </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga3857ab06946e6b4047352d5d84ffff4daa54abf62265d1c2beaeeadb6a1ee240f"></a>EM_TMO_STATE_ACTIVE&#160;</td><td class="fielddoc">
<p>armed </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga3857ab06946e6b4047352d5d84ffff4da49eaac5bf1e148e549517bc92823043c"></a>EM_TMO_STATE_INACTIVE&#160;</td><td class="fielddoc">
<p>oneshot expired </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../db/d46/event__machine__timer_8h_source.html#l00206">206</a> of file <a class="el" href="../../db/d46/event__machine__timer_8h_source.html">event_machine_timer.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga56968bda0ecacf996d6ce623e3e372ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">em_timer_t em_timer_create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a> *&#160;</td>
          <td class="paramname"><em>tmr_attr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create and start a timer resource</p>
<p>Required attributes can be given via tmr_attr. The given attr structure should be cleared (written with 0) before setting any value fields for backwards compatibility.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmr_attr</td><td>Timer requirement parameters. NULL ok (accept all defaults)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Timer handle on success or EM_TIMER_UNDEF on error </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a27">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a29">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00076">76</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaabb77ed31727a32d041f9d308a0a3886"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a> em_timer_current_tick </td>
          <td>(</td>
          <td class="paramtype">em_timer_t&#160;</td>
          <td class="paramname"><em>tmr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns current tick value of the given timer</p>
<p>This can be used for calculating absolute timeouts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmr</td><td>Timer handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Current time in timer specific ticks or 0 on non-existing timer </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a53">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a57">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00310">310</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga2bac1530b021bbbd1f0f924414c2485e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> em_timer_delete </td>
          <td>(</td>
          <td class="paramtype">em_timer_t&#160;</td>
          <td class="paramname"><em>tmr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop and delete a timer</p>
<p>Delete a timer, frees all resources. All timeouts for this timer must have been deleted first.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmr</td><td>Timer handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EM_OK on success </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a44">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a45">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00286">286</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga25b88dbbb772090d6caa5622c7017889"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int em_timer_get_all </td>
          <td>(</td>
          <td class="paramtype">em_timer_t *&#160;</td>
          <td class="paramname"><em>tmr_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get a list of currently active timers</p>
<p>Returned timer handles can be used to query for more information or to destroy all existing timers.</p>
<p>The actual number of timers is returned but 'tmr_list' will only be written up to the given 'max' length (if there are more timers than the given 'max').</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">tmr_list</td><td>Pointer to a space for timer handles </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">max</td><td>Max number of handles that can written into tmr_list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of active timers </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a47">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a48">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00603">603</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga01e680281f0ae40bce6c6786fc0bcdc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> em_timer_get_attr </td>
          <td>(</td>
          <td class="paramtype">em_timer_t&#160;</td>
          <td class="paramname"><em>tmr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a> *&#160;</td>
          <td class="paramname"><em>tmr_attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get timer attributes</p>
<p>Returns the actual capabilities of the given timer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">tmr</td><td>Timer handle </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tmr_attr</td><td>Pointer to <a class="el" href="../../d4/d00/structem__timer__attr__t.html">em_timer_attr_t</a> to fill</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EM_OK on success </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a48">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a49">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00627">627</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="gae97b08e2b1468de76a7d92342a5860ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t em_timer_get_freq </td>
          <td>(</td>
          <td class="paramtype">em_timer_t&#160;</td>
          <td class="paramname"><em>tmr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the timer frequency, i.e. ticks per second for the given timer.</p>
<p>Can be used to convert real time to timer specific tick unit.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmr</td><td>Timer handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ticks per second (Hz), or 0 for non-existing timer </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a37">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a39">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00657">657</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaf65f50c383b579720a31154b04ea610e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> em_tmo_ack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a>&#160;</td>
          <td class="paramname"><em>tmo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">em_event_t&#160;</td>
          <td class="paramname"><em>next_tmo_ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acknowledge a periodic timeout.</p>
<p>All received periodic timeout events must be acknowledged with <a class="el" href="../../de/dc2/group__em__timer.html#gaf65f50c383b579720a31154b04ea610e">em_tmo_ack()</a>. No further timeout event(s) will be sent before the user has acknowledged the previous ones.</p>
<p>Timeout acknowledgment is usually done at the end of the EO-receive function to prevent race conditions (e.g. if the same event is re-used for the next timeout period also). The implementation will adjust for the processing delay so that the time slot will not slip/drift over time.</p>
<p>If <a class="el" href="../../de/dc2/group__em__timer.html#gaf65f50c383b579720a31154b04ea610e">em_tmo_ack()</a> is called "too late", e.g. the next period(s) are already passed, the implementation will by default skip all the missed time slots and arm for the next future one. The application can, if skipping is undesired, alter this behaviour with the flag EM_TMO_FLAG_NOSKIP when creating a timeout - here no past timeout is skipped and each acknowledgment will immediately trigger the next timeout until the current time has been reached. Note that using EM_TMO_FLAG_NOSKIP may result in an event storm if a large number of timeouts have been unacknowledged for a longer time.</p>
<p>The application may re-use the same timeout event that was received or provide a new one for the next timeout. An error will be returned if the corresponding timeout has been cancelled.</p>
<p>The given event should not be touched after calling this until it has been received again.</p>
<p>The given event must be handled by the application if an error is returned. The periodic timeout will stop if <a class="el" href="../../de/dc2/group__em__timer.html#gaf65f50c383b579720a31154b04ea610e">em_tmo_ack()</a> returns an error.</p>
<p><a class="el" href="../../de/dc2/group__em__timer.html#gaf65f50c383b579720a31154b04ea610e">em_tmo_ack()</a> can only be used with periodic timeouts and will fail for one-shot timeouts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmo</td><td>Timeout handle </td></tr>
    <tr><td class="paramname">next_tmo_ev</td><td>Next timeout event handle (can be the current one)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EM_OK on success </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a58">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a56">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00529">529</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga786f0cc89e9bdfda1c1274165600f0ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> em_tmo_cancel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a>&#160;</td>
          <td class="paramname"><em>tmo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">em_event_t *&#160;</td>
          <td class="paramname"><em>cur_event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancel a timeout</p>
<p>Cancels a timeout, preventing future expiration. Returns the timeout event, given to em_tmo_set_abs/rel(), in case the timeout is still active.</p>
<p>A timeout that has already expired cannot be cancelled and the timeout event will be delivered to the destination queue. In this case, cancel will return an error as it was too late to cancel. Cancel also fails if attempted before timeout activation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">tmo</td><td>Timeout handle </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cur_event</td><td>Event handle pointer to return the pending timeout event or EM_EVENT_UNDEF if cancel fails (e.g. called too late)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EM_OK on success </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../dd/d10/timer_test_8c-example.html#a59">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00495">495</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga4fc3dd338b784ce9b122eeb3fbf4ea07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a> em_tmo_create </td>
          <td>(</td>
          <td class="paramtype">em_timer_t&#160;</td>
          <td class="paramname"><em>tmr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dc2/group__em__timer.html#gaade0f99e694a2f999abe467bc05fde61">em_tmo_flag_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">em_queue_t&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate a new timeout</p>
<p>Create a new timeout. Allocates the necessary internal resources from the given timer and prepares for em_tmo_set_abs/rel().</p>
<p>Flags are used to select functionality:</p><ul>
<li>EM_TMO_FLAG_ONESHOT creates a one-shot timeout and</li>
<li>EM_TMO_FLAG_PERIODIC creates a periodic timeout. The flag EM_TMO_FLAG_NOSKIP can, in the periodic case, be 'OR':d into the flags to make the timeout acknowledgment never skip a missed timeout (the default is to skip missed time slots).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmr</td><td>Timer handle </td></tr>
    <tr><td class="paramname">flags</td><td>Functionality flags </td></tr>
    <tr><td class="paramname">queue</td><td>Target queue where the timeout event should be delivered</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Timeout handle on success or EM_TMO_UNDEF on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a30">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a32">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00323">323</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga02299198fbbddd489006485544892da8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> em_tmo_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a>&#160;</td>
          <td class="paramname"><em>tmo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">em_event_t *&#160;</td>
          <td class="paramname"><em>cur_event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free a timeout</p>
<p>Free (destroy) a timeout. The user provided timeout event for an active timeout will be returned via cur_event and the timeout is cancelled. The timeout event for an expired, but not yet received timeout, will not be returned. It is the responsibility of the application to handle that case.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">tmo</td><td>Timeout handle </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cur_event</td><td>Current event for an active timeout</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EM_OK on success </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a54">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a52">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00376">376</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga66476f77546996eea9acebaa471c1b52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a> em_tmo_get_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a>&#160;</td>
          <td class="paramname"><em>tmo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current state of the given timeout.</p>
<p>Note that the returned state may change at any time if the timeout expires or is manipulated by other threads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmo</td><td>Timeout handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>current timeout state (EM_TMO_STATE_UNKNOWN on error)</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../de/dc2/group__em__timer.html#ga3857ab06946e6b4047352d5d84ffff4d">em_tmo_state_t</a> </dd></dl>

<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00673">673</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga0270ed11757a26046af070264404ecbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> em_tmo_set_abs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a>&#160;</td>
          <td class="paramname"><em>tmo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a>&#160;</td>
          <td class="paramname"><em>ticks_abs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">em_event_t&#160;</td>
          <td class="paramname"><em>tmo_ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Activate a timeout (absolute time) with a user-provided timeout event</p>
<p>Sets the timeout to expire at a specific absolute time. The timeout event will be sent to the queue given to <a class="el" href="../../de/dc2/group__em__timer.html#ga4fc3dd338b784ce9b122eeb3fbf4ea07">em_tmo_create()</a> when the timeout expires.</p>
<p>It is not possible to send timeouts with an event group (but the application can assign the event group when receiving the timeout event, see <a class="el" href="../../d8/d4c/group__em__event__group.html#gae18f8b19fb0df69fc61bd53b86f54637">em_event_group_assign()</a>).</p>
<p>The timeout event should not be accessed after it has been given to the timer.</p>
<p>Even if not guaranteed, the implementation should make sure that this call can fail only in highly exceptional situations (<a class="el" href="../../de/dc2/group__em__timer.html#ga4fc3dd338b784ce9b122eeb3fbf4ea07">em_tmo_create()</a> should pre- allocate needed resources).</p>
<p>Setting 'ticks' to an already passed time value is considered an error.</p>
<p>An active timeout can not be modified. The timeout needs to be canceled and then set again (tmo handle can be re-used) with new arguments.</p>
<p>An inactive timeout can be re-used by calling em_tmo_set_abs/rel() again after the previous timeout has expired.</p>
<p>This function cannot be used to activate a periodic timer, instead use <a class="el" href="../../de/dc2/group__em__timer.html#gabe6b4e51cd71d86d0e60534ba00cbac2">em_tmo_set_rel()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmo</td><td>Timeout handle </td></tr>
    <tr><td class="paramname">ticks_abs</td><td>Expiration time in absolute timer specific ticks </td></tr>
    <tr><td class="paramname">tmo_ev</td><td>Timeout event</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EM_OK on success </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a59">timer_hello.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00413">413</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
<a class="anchor" id="gabe6b4e51cd71d86d0e60534ba00cbac2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d11/event__machine__types_8h.html#adddd88868f7aa0d32b3e40245eb4ef8f">em_status_t</a> em_tmo_set_rel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dc2/group__em__timer.html#ga4d03edec0f070b22d68088c31483a125">em_tmo_t</a>&#160;</td>
          <td class="paramname"><em>tmo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dc2/group__em__timer.html#gafe7128676f8f4ad4800fd204a34ac8d3">em_timer_tick_t</a>&#160;</td>
          <td class="paramname"><em>ticks_rel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">em_event_t&#160;</td>
          <td class="paramname"><em>tmo_ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Activate a timeout (relative time) with a user-provided timeout event</p>
<p>Similar to <a class="el" href="../../de/dc2/group__em__timer.html#ga0270ed11757a26046af070264404ecbf">em_tmo_set_abs()</a> but, instead of an absolute time, uses a timeout 'ticks' value relative to the moment of the call.</p>
<p>The timeout event will be sent to the queue given to <a class="el" href="../../de/dc2/group__em__timer.html#ga4fc3dd338b784ce9b122eeb3fbf4ea07">em_tmo_create()</a> when the timeout expires.</p>
<p>This function is also used for activating a periodic timeout, in which case the given 'ticks' is the timeout period (a periodic timeout is selected with em_tmo_create(flags:EM_TMO_FLAG_PERIODIC).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmo</td><td>Timeout handle </td></tr>
    <tr><td class="paramname">ticks_rel</td><td>Expiration time in relative timer specific ticks </td></tr>
    <tr><td class="paramname">tmo_ev</td><td>Timeout event handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EM_OK on success </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d5/dfe/timer_hello_8c-example.html#a39">timer_hello.c</a>, and <a class="el" href="../../dd/d10/timer_test_8c-example.html#a40">timer_test.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html#l00455">455</a> of file <a class="el" href="../../d1/dc8/event__machine__timer_8c_source.html">event_machine_timer.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
  <div id="footer" class="tabs">
   <div class="headertitle"> 
     &copy; 2017 Nokia Networks
   </div>
  </div>
 </body>
</html>
